import{D as x,L as oe,S as E,i as S,s as X,l as P,g,K as V,d as c,M as W,e as $,c as L,a as M,b as m,k as A,t as ue,m as F,h as fe,J as ee,j as de,N as he,w as T,x as b,y as R,q as _,o as y,B as O,f as I,O as ce,P as te,Q as ie,n as me,p as ge,R as ve}from"../chunks/vendor-cd581d9e.js";class re{constructor(e,r){this.LeftMargin=100,this.OneHour=36e5,this.OneDay=this.OneHour*24,this.time=e,this.ruler=r}isVisible(e){return this.time%(e*this.OneHour*.5)==0&&this.time%(e*this.OneHour)!=0}drawLine(e,r,i,t=!1){e.setLineDash([3,2]),e.strokeStyle="#dddddd",e.beginPath(),e.moveTo(r,25),e.lineTo(r,i),e.stroke()}render(e,r,i){const t="|";var n=this.ruler.getX(this.time,r);n>this.ruler.leftMargin&&n>this.LeftMargin&&(e.font="12px Arial",e.fillText(t,n-e.measureText(t).width/2,15),this.drawLine(e,n,i))}}class ne extends re{drawLine(e,r,i,t=!1){t?e.strokeStyle="#aaaaaa":e.strokeStyle="#dddddd",e.setLineDash([]),e.beginPath(),e.moveTo(r,25),e.lineTo(r,i),e.stroke()}render(e,r,i){var t=this.ruler.getX(this.time,r);if(t>this.ruler.leftMargin){var n=new Date(this.time);let l=n.toLocaleTimeString("nb-no",{hour:"2-digit",minute:"2-digit",hour12:!1});l=="00:00"?(l=n.toLocaleDateString("nb-no"),e.font="bold 12px Arial",this.drawLine(e,t,i,!0)):(e.font="12px Arial",this.drawLine(e,t,i)),e.fillText(l,t-e.measureText(l).width/2,17)}}}class _e extends ne{render(e,r,i){var t=this.ruler.getX(this.time,r);if(t>this.ruler.leftMargin){var n=new Date(this.time);let l;n.getMonth()==0?(l=`${n.getFullYear()}`,e.font="bold 12px Arial",this.drawLine(e,t,i,!0)):(l="|",this.drawLine(e,t,i,!1)),e.fillText(l,t-e.measureText(l).width/2,17)}}}const B=110,Q=[1/60,5/60,1/4,1/2,1,2,4,6,12,24,48,96,192],J=[1/12,1/6,1/4,1/2,1,2,4,8,16],we=9e5,z=we*4,se=z*24,G=se*365.25;class pe{constructor(e,r){this.leftMargin=100,this.leftMargin=r,this.start=e.start.getTime(),this.end=e.end.getTime(),this.span=this.end-this.start}calculateTimeUnits(e){var r=e/this.span;if(r<=0)return{detailed:!1,unit:1};for(var i=0;i<Q.length;i++){var t=Q[i],n=r*z*t;if(n>=B)return{detailed:!0,v:t}}for(var i=0;i<J.length;i++){var t=J[i],n=r*G*t;if(n>=B)return{detailed:!1,v:t}}return{detailed:!1,unit:1}}getX(e,r,i=!1,t=null){t==null&&(t=this.leftMargin);var n=t+(r-t)*(e-this.start)/this.span;return n<t&&i?-999:n}calculateLocalTime(e){var r=new Date(e).getTimezoneOffset()*60*1e3;return e+r}render(e,r,i){var t=this.calculateTimeUnits(r),n=this.start-this.start%se,l=this.calculateLocalTime(n),f=new Array;if(t.detailed){for(var u=l;u<this.end;u+=z*t.v)f.push(new ne(u,this));for(var u=l+z*t.v*.5;u<this.end;u+=z*t.v)f.push(new re(u,this))}else for(var o=new Date(new Date(l).getFullYear(),0).getTime(),d=new Date(new Date(this.end).getFullYear(),12,31).getTime(),u=o;u<d;u+=G*t.v){var w=new Date(u),p=new _e(w.getTime(),this);f.push(p)}const H=new Date(l).toDateString();e.font="bold 12px Arial",e.fillText(H,4,17),f.map(Y=>{Y&&Y.render(e,r,i)})}}class le{constructor(e,r,i,t){this.start=e,this.end=r,this.min=i,this.max=t}getLeft(e,r){return e.getX(this.start.getTime(),r,!1,0)}getWidth(e,r){return e.getX(this.end.getTime(),r,!1,0)-this.getLeft(e,r)}}const ye=oe(new Date,function(e){const r=setInterval(()=>{e(new Date)},1e3);return function(){clearInterval(r)}});var j=new Date;x(new le(new Date(j.getTime()-5*36e5),new Date(j.getTime()+5*36e5)));const ae=x(new le(new Date(j.getTime()-1*36e5),new Date(j.getTime()+1*36e5)));function De(s){let e,r;return{c(){e=$("div"),this.h()},l(i){e=L(i,"DIV",{class:!0,style:!0}),M(e).forEach(c),this.h()},h(){m(e,"class","overlayRight svelte-l2l9jo"),m(e,"style",r=`left:${s[1]-60}px;right:${s[1]}px`)},m(i,t){g(i,e,t)},p(i,t){t&2&&r!==(r=`left:${i[1]-60}px;right:${i[1]}px`)&&m(e,"style",r)},d(i){i&&c(e)}}}function $e(s){let e,r;return{c(){e=$("div"),this.h()},l(i){e=L(i,"DIV",{class:!0,style:!0}),M(e).forEach(c),this.h()},h(){m(e,"class","overlayLeft svelte-l2l9jo"),m(e,"style",r=`left:${s[0].leftMargin-30}px`)},m(i,t){g(i,e,t)},p(i,t){t&1&&r!==(r=`left:${i[0].leftMargin-30}px`)&&m(e,"style",r)},d(i){i&&c(e)}}}function Le(s){let e,r,i,t,n=s[4].toLocaleTimeString("nb-no",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})+"",l,f;return{c(){e=$("div"),i=A(),t=$("div"),l=ue(n),this.h()},l(u){e=L(u,"DIV",{class:!0,style:!0}),M(e).forEach(c),i=F(u),t=L(u,"DIV",{class:!0,style:!0});var o=M(t);l=fe(o,n),o.forEach(c),this.h()},h(){m(e,"class","line svelte-l2l9jo"),m(e,"style",r=`left:${s[3]}px;height:${s[2]-5}px`),m(t,"class","overlay svelte-l2l9jo"),m(t,"style",f=`left:${s[3]}px`)},m(u,o){g(u,e,o),g(u,i,o),g(u,t,o),ee(t,l)},p(u,o){o&12&&r!==(r=`left:${u[3]}px;height:${u[2]-5}px`)&&m(e,"style",r),o&16&&n!==(n=u[4].toLocaleTimeString("nb-no",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})+"")&&de(l,n),o&8&&f!==(f=`left:${u[3]}px`)&&m(t,"style",f)},d(u){u&&c(e),u&&c(i),u&&c(t)}}}function Me(s){let e;function r(n,l){if(!n[5]&&!n[6])return Le;if(n[5])return $e;if(n[6])return De}let i=r(s),t=i&&i(s);return{c(){t&&t.c(),e=P()},l(n){t&&t.l(n),e=P()},m(n,l){t&&t.m(n,l),g(n,e,l)},p(n,[l]){i===(i=r(n))&&t?t.p(n,l):(t&&t.d(1),t=i&&i(n),t&&(t.c(),t.m(e.parentNode,e)))},i:V,o:V,d(n){t&&t.d(n),n&&c(e)}}}function Te(s,e,r){let i;W(s,ye,d=>r(4,i=d));let{timeRuler:t}=e,{width:n}=e,{height:l}=e,f,u,o;return s.$$set=d=>{"timeRuler"in d&&r(0,t=d.timeRuler),"width"in d&&r(1,n=d.width),"height"in d&&r(2,l=d.height)},s.$$.update=()=>{s.$$.dirty&27&&(r(3,f=t==null?void 0:t.getX(i.getTime(),n)),r(5,u=f<t.leftMargin-30),r(6,o=f>n+30))},[t,n,l,f,i,u,o]}class be extends E{constructor(e){super();S(this,e,Te,Me,X,{timeRuler:0,width:1,height:2})}}function Re(s){let e,r;return e=new he({props:{render:s[0]}}),{c(){T(e.$$.fragment)},l(i){b(e.$$.fragment,i)},m(i,t){R(e,i,t),r=!0},p(i,[t]){const n={};t&1&&(n.render=i[0]),e.$set(n)},i(i){r||(_(e.$$.fragment,i),r=!0)},o(i){y(e.$$.fragment,i),r=!1},d(i){O(e,i)}}}function Oe(s,e,r){let i,{timeRuler:t}=e;return s.$$set=n=>{"timeRuler"in n&&r(1,t=n.timeRuler)},s.$$.update=()=>{s.$$.dirty&2&&r(0,i=({context:n,width:l,height:f})=>{t.render(n,l,f)})},[i,t]}class ke extends E{constructor(e){super();S(this,e,Oe,Re,X,{timeRuler:1})}}var K=(s=>(s[s.Free=0]="Free",s[s.Horizontal=1]="Horizontal",s[s.Vertical=2]="Vertical",s))(K||{});function Ee(s,e=K.Free){let r=new DOMMatrixReadOnly,i=new DOMMatrixReadOnly,t=new DOMMatrixReadOnly,n=new DOMMatrixReadOnly,l,f=!1,u;function o(a,h){return Math.sqrt((h.x-a.x)*(h.x-a.x)+(h.y-a.y)*(h.y-a.y)+(h.z-a.z)*(h.z-a.z))}function d(a){f=a.ctrlKey}function w(a){var h,v;((h=a.touches)==null?void 0:h.length)>0&&k(a,a.touches[0].pageX,a.touches[0].pageY),((v=a.touches)==null?void 0:v.length)>1&&(u=o(new DOMPoint(a.touches[0].pageX,a.touches[0].pageY),new DOMPoint(a.touches[1].pageX,a.touches[1].pageY)))}function p(a){k(a,a.clientX,a.clientY)}function k(a,h,v){window.addEventListener("mousemove",Y),s.addEventListener("touchmove",H),window.addEventListener("mouseup",D),s.addEventListener("touchend",D),window.addEventListener("mouseleave",D),window.addEventListener("blur",D),l=new DOMPoint(h,v),i=new DOMMatrixReadOnly,n=new DOMMatrixReadOnly,a.preventDefault()}function H(a){var v,N;if(((v=a.touches)==null?void 0:v.length)>0&&q(a,a.touches[0].pageX,a.touches[0].pageY),u&&((N=a.touches)==null?void 0:N.length)>1){var h=o(new DOMPoint(a.touches[0].pageX,a.touches[0].pageY),new DOMPoint(a.touches[1].pageX,a.touches[1].pageY));C(a,h/u)}}function Y(a){if(f){var h=o(new DOMPoint(a.clientX,a.clientY),l),v=h/20;C(a,v)}else q(a,a.clientX,a.clientY)}function U(){var a=i.multiply(n);s.style.transform=`${a}`}function q(a,h,v){l&&(n=t,i=r,e<2&&(i=i.multiply(new DOMMatrixReadOnly().translate(h-l.x,0))),e!=1&&(i=i.multiply(new DOMMatrixReadOnly().translate(0,v-l.y))),U(),a.preventDefault())}function C(a,h){l&&(i=r,n=t,e<2&&(n=n.multiply(new DOMMatrixReadOnly().scale(h,1))),e!=1&&(n=n.multiply(new DOMMatrixReadOnly().scale(1,h))),U(),a.preventDefault())}function D(a){f=!1,l=null,r=i,t=n,window.removeEventListener("mouseup",D),s.removeEventListener("touchend",D),window.removeEventListener("mousemove",Y),s.removeEventListener("touchmove",H),a.preventDefault()}return s.addEventListener("mousedown",p),s.addEventListener("touchstart",w),window.addEventListener("keydown",d),window.addEventListener("keyup",D),{update(){},destroy(){s.removeEventListener("mousedown",p),s.removeEventListener("touchstart",w),window.removeEventListener("keydown",d),window.removeEventListener("keyup",D)}}}function Se(s){let e,r,i;return{c(){e=$("div"),this.h()},l(t){e=L(t,"DIV",{class:!0,style:!0}),M(e).forEach(c),this.h()},h(){m(e,"class","button svelte-5laq3u"),I(e,"left",s[2].getLeft(s[0],s[1])+"px"),I(e,"width",s[2].getWidth(s[0],s[1])+"px")},m(t,n){g(t,e,n),r||(i=ce(Ee.call(null,e,K.Horizontal)),r=!0)},p(t,[n]){n&7&&I(e,"left",t[2].getLeft(t[0],t[1])+"px"),n&7&&I(e,"width",t[2].getWidth(t[0],t[1])+"px")},i:V,o:V,d(t){t&&c(e),r=!1,i()}}}function Xe(s,e,r){let i;W(s,ae,l=>r(2,i=l));let{timeRuler:t}=e,{width:n}=e;return s.$$set=l=>{"timeRuler"in l&&r(0,t=l.timeRuler),"width"in l&&r(1,n=l.width)},s.$$.update=()=>{s.$$.dirty&7&&console.log("l",i.getLeft(t,n)),s.$$.dirty&7&&console.log("w",i.getWidth(t,n))},[t,n,i]}class Ye extends E{constructor(e){super();S(this,e,Xe,Se,X,{timeRuler:0,width:1})}}function ze(s){let e,r,i,t;return r=new Ye({props:{timeRuler:s[0],width:s[1]}}),{c(){e=$("div"),T(r.$$.fragment),this.h()},l(n){e=L(n,"DIV",{class:!0});var l=M(e);b(r.$$.fragment,l),l.forEach(c),this.h()},h(){m(e,"class","track svelte-89wjm2"),te(()=>s[2].call(e))},m(n,l){g(n,e,l),R(r,e,null),i=ie(e,s[2].bind(e)),t=!0},p(n,[l]){const f={};l&1&&(f.timeRuler=n[0]),l&2&&(f.width=n[1]),r.$set(f)},i(n){t||(_(r.$$.fragment,n),t=!0)},o(n){y(r.$$.fragment,n),t=!1},d(n){n&&c(e),O(r),i()}}}function Ve(s,e,r){let{timeRuler:i}=e,t;function n(){t=this.clientWidth,r(1,t)}return s.$$set=l=>{"timeRuler"in l&&r(0,i=l.timeRuler)},[i,t,n]}class He extends E{constructor(e){super();S(this,e,Ve,ze,X,{timeRuler:0})}}function Z(s){let e,r,i,t,n,l,f,u;return r=new ve({props:{width:s[0],height:s[1],$$slots:{default:[Ie]},$$scope:{ctx:s}}}),t=new be({props:{timeRuler:s[2],width:s[0],height:s[1]}}),f=new He({props:{timeRuler:s[2]}}),{c(){e=$("div"),T(r.$$.fragment),i=A(),T(t.$$.fragment),l=A(),T(f.$$.fragment),this.h()},l(o){e=L(o,"DIV",{class:!0});var d=M(e);b(r.$$.fragment,d),i=F(d),b(t.$$.fragment,d),d.forEach(c),l=F(o),b(f.$$.fragment,o),this.h()},h(){m(e,"class","timeline svelte-9bem79"),te(()=>s[4].call(e))},m(o,d){g(o,e,d),R(r,e,null),ee(e,i),R(t,e,null),n=ie(e,s[4].bind(e)),g(o,l,d),R(f,o,d),u=!0},p(o,d){const w={};d&1&&(w.width=o[0]),d&2&&(w.height=o[1]),d&36&&(w.$$scope={dirty:d,ctx:o}),r.$set(w);const p={};d&4&&(p.timeRuler=o[2]),d&1&&(p.width=o[0]),d&2&&(p.height=o[1]),t.$set(p);const k={};d&4&&(k.timeRuler=o[2]),f.$set(k)},i(o){u||(_(r.$$.fragment,o),_(t.$$.fragment,o),_(f.$$.fragment,o),u=!0)},o(o){y(r.$$.fragment,o),y(t.$$.fragment,o),y(f.$$.fragment,o),u=!1},d(o){o&&c(e),O(r),O(t),n(),o&&c(l),O(f,o)}}}function Ie(s){let e,r;return e=new ke({props:{timeRuler:s[2]}}),{c(){T(e.$$.fragment)},l(i){b(e.$$.fragment,i)},m(i,t){R(e,i,t),r=!0},p(i,t){const n={};t&4&&(n.timeRuler=i[2]),e.$set(n)},i(i){r||(_(e.$$.fragment,i),r=!0)},o(i){y(e.$$.fragment,i),r=!1},d(i){O(e,i)}}}function Pe(s){let e,r,i=s[2]&&Z(s);return{c(){i&&i.c(),e=P()},l(t){i&&i.l(t),e=P()},m(t,n){i&&i.m(t,n),g(t,e,n),r=!0},p(t,[n]){t[2]?i?(i.p(t,n),n&4&&_(i,1)):(i=Z(t),i.c(),_(i,1),i.m(e.parentNode,e)):i&&(me(),y(i,1,1,()=>{i=null}),ge())},i(t){r||(_(i),r=!0)},o(t){y(i),r=!1},d(t){i&&i.d(t),t&&c(e)}}}function je(s,e,r){let i;W(s,ae,u=>r(3,i=u));let t,n,l;function f(){t=this.clientWidth,n=this.clientHeight,r(0,t),r(1,n)}return s.$$.update=()=>{s.$$.dirty&8&&r(2,l=new pe(i,200))},[t,n,l,i,f]}class Ae extends E{constructor(e){super();S(this,e,je,Pe,X,{})}}function Fe(s){let e,r,i;return r=new Ae({}),{c(){e=$("div"),T(r.$$.fragment),this.h()},l(t){e=L(t,"DIV",{class:!0});var n=M(e);b(r.$$.fragment,n),n.forEach(c),this.h()},h(){m(e,"class","main svelte-l7ms3l")},m(t,n){g(t,e,n),R(r,e,null),i=!0},p:V,i(t){i||(_(r.$$.fragment,t),i=!0)},o(t){y(r.$$.fragment,t),i=!1},d(t){t&&c(e),O(r)}}}class Ke extends E{constructor(e){super();S(this,e,null,Fe,X,{})}}export{Ke as default};
